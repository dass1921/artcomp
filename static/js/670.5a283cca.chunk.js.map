{"version":3,"file":"static/js/670.5a283cca.chunk.js","mappings":"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","sources":["components/filter-panel.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport Select from \"react-select\";\r\nimport { MongoContext } from \"../context/mongo-context\";\r\n\r\nfunction FilterPanel(props) {\r\n  const { filters, setFilters } = useContext(MongoContext);\r\n  const onChangeFilters = (key, value) => {\r\n    let copy = new Map(filters);\r\n    copy.set(\r\n      key,\r\n      value.map((v) => v.value)\r\n    );\r\n    console.log(copy);\r\n    setFilters(copy);\r\n  };\r\n  return (\r\n    <Row className=\"py-1\">\r\n      <Col xs={12} className=\"mb-3\">\r\n        <FilterBox\r\n          isMulti\r\n          filterKey=\"artist_name\"\r\n          label=\"Artists\"\r\n          // fallBack={ARTISTS.map((v) => ({ value: v, label: v }))}\r\n          onChange={(v) => onChangeFilters(\"artist_name\", v)}\r\n        />\r\n      </Col>\r\n      <Col xs={12} className=\"mb-3\">\r\n        <FilterBox\r\n          isMulti\r\n          filterKey=\"category\"\r\n          label=\"Art Category\"\r\n          onChange={(v) => onChangeFilters(\"category\", v)}\r\n          // fallBack={CATEGORY.map((v) => ({ value: v, label: v }))}\r\n        />\r\n      </Col>\r\n      <Col xs={12} className=\"mb-3\">\r\n        <FilterBox\r\n          isMulti\r\n          filterKey=\"auction_name\"\r\n          label=\"Auction\"\r\n          onChange={(v) => onChangeFilters(\"auction_name\", v)}\r\n        />\r\n      </Col>\r\n      <Col xs={12} className=\"mb-3\">\r\n        <FilterBox\r\n          isMulti\r\n          filterKey=\"auction_house\"\r\n          label=\"Auction House\"\r\n          onChange={(v) => onChangeFilters(\"auction_house\", v)}\r\n        />\r\n      </Col>\r\n      <Col xs={12} className=\"mb-3\">\r\n        <FilterBox\r\n          isMulti\r\n          filterKey=\"auction_date\"\r\n          label=\"Auction Date\"\r\n          onChange={(v) => onChangeFilters(\"auction_date\", v)}\r\n          isDate\r\n        />\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n\r\nexport default FilterPanel;\r\n\r\nfunction FilterBox(props) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [options, setOptions] = useState(props.fallBack ?? []);\r\n\r\n  const { user } = useContext(MongoContext);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    if (!props.fallBack && user) {\r\n      user?.functions\r\n        ?.getSaffronArtFilters(props.filterKey, props.isDate)\r\n        .then((resp) => {\r\n          if (props.isDate) {\r\n            setOptions(\r\n              resp.result\r\n                .map((v) => ({\r\n                  value: v._id,\r\n                  label: new Date(v._id),\r\n                }))\r\n                .sort((a, b) => a.label.getTime() - b.label.getTime())\r\n                .map((x) => ({\r\n                  ...x,\r\n                  label: x.label.toDateString(),\r\n                }))\r\n            );\r\n          } else {\r\n            setOptions(\r\n              resp.result\r\n                .map((v) => ({ value: v._id, label: v._id }))\r\n                .filter((x) => !!x.value)\r\n                .sort((a, b) => a.label.localeCompare(b.label))\r\n            );\r\n          }\r\n          setLoading(false);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          setLoading(false);\r\n        })\r\n        .finally((x) => console.log(x));\r\n    }\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <span className=\"text-white\">{props.label}</span>\r\n      <Select\r\n        isMulti\r\n        name={props.filterKey}\r\n        title={props.filterKey}\r\n        options={options}\r\n        onChange={props.onChange}\r\n        isLoading={loading}\r\n        menuPlacement=\"top\"\r\n      />\r\n    </>\r\n  );\r\n}\r\n"],"names":["FilterBox","props","useState","loading","setLoading","fallBack","options","setOptions","user","useContext","MongoContext","useEffect","functions","getSaffronArtFilters","filterKey","isDate","then","resp","result","map","v","value","_id","label","Date","sort","a","b","getTime","x","toDateString","filter","localeCompare","catch","err","console","log","finally","className","isMulti","name","title","onChange","isLoading","menuPlacement","filters","setFilters","onChangeFilters","key","copy","Map","set","xs"],"sourceRoot":""}